---
title: "DDDでレガシーシステムを“壊さずに”変革する考え方"
emoji: "💬"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["ddd"]
published: false
---

:::message
この記事は、xxx Advent Calendar 2025 15日目の記事です。  
昨日は xxx さんの「xxx」でした。
:::

https://qiita.com/advent-calendar/2025

長年動き続けているWebアプリの保守や機能追加に関わっていると、  
「この構造、そろそろ限界かもしれない」と感じる瞬間が何度もあります。  
それでも業務は止められず、結局はそのまま手を入れ続けて今に至っています。

一方で、「いっそ新しく作り直した方が早いのでは」と思うことも正直あります。  
しかし、現実には既存システムには多くの業務知識が詰まっており、  
簡単に捨てられるものでもありません。

そんな中で、O’Reilly の **Domain-Driven Transformation** を読み終えました。  
この本は、単なるDDDの設計解説ではなく、  
**レガシーシステムを“壊さずに”どのように変革していくか** に正面から向き合った内容です。

この記事では、実際に本を読んで感じたことと、  
なぜ「作り直し」ではなく「変革」という考え方が現実的なのかについて、  
自分なりに整理してみたいと思います。


## なぜレガシー刷新は失敗しやすいのか

レガシーシステムの刷新が失敗しやすい理由には、いくつか共通点があると感じています。

- 先に「理想のアーキテクチャ」を決めてしまう  
- 現場の業務理解が追いついていない  
- チーム構成が旧システム前提のまま  
- 「完成後に切り替える」前提で進めてしまう  

結果として、

> 技術だけを置き換えようとして、  
> ビジネスと組織が置き去りになる  

という状態になりがちです。  
これが、これまで多くのレガシー刷新がうまくいかなかった大きな理由ではないかと感じました。


## この本が扱っているのは「設計」ではなく「変革」

一般的な DDD の書籍は、以下のような内容が中心になりがちです。

- エンティティ  
- 値オブジェクト  
- 集約  
- リポジトリ  

一方で **Domain-Driven Transformation** が真正面から扱っているのは、  
**「設計」そのものではなく、「変革のプロセス」そのもの** です。

本書では常に次の3つをセットで扱っています。

- ✅ ビジネス（ドメイン）
- ✅ ソフトウェアアーキテクチャ
- ✅ チーム・組織構造

どれか1つだけを先に変えてしまうと、必ずどこかで歪みが生まれます。  
そのため、「3つを同時に、少しずつ動かし続ける」という考え方が一貫しています。


## いきなりマイクロサービスにしない

本書の中で、特に印象に残ったメッセージが次の考え方です。

> **まずはモジュラーモノリスを作る**

よくある失敗パターンとして、

- 境界が曖昧なままサービス分割
- データは共有、責務は不明確
- 障害時には全員が関わる
- 結局、モノリスよりも複雑になる  

という流れをよく見かけます。

それに対して本書では、

- まず **業務単位（ドメイン単位）で境界を明確にする**
- 物理的な分割（マイクロサービス化）は最後
- ロジックと責務が分かれていれば、配置はあとから変えられる  

という順番が徹底されています。


## 変革の出発点は「コード」ではなく「業務」

Domain-Driven Transformation では、変革の第一歩として以下のような  
**会話ベースのモデリング** が強く推奨されています。

- EventStorming  
- ドメインストーリーテリング  
- シナリオキャスティング  

ここで行うことはとてもシンプルです。

- このシステムは、どんな業務の流れを支えているのか  
- どんなイベントが発生しているのか  
- 人が悩むポイントはどこか  
- 属人化している判断はどこか  

多くのレガシーシステムでは、

- コードの奥に業務ロジックが埋もれている  
- ドキュメントには書かれていないルールが存在する  
- 特定の人しか知らない仕様がある  

という状態が当たり前になっています。

この **暗黙知を可視化すること自体が、すでに変革の第一歩** である、という点が非常に現実的だと感じました。


## 変革は4ステップで進める

本書では、ドメイン駆動変革を次の4ステップで進めていきます。

### Step1：ドメイン再発見

- 現場の業務フローを洗い出す  
- 価値の流れを可視化する  
- 暗黙知を言葉にする  

### Step2：ドメイン駆動の目標アーキテクチャを設計

- 境界づけられたコンテキストを定義  
- どこを分けるか、どこをまとめるかを決める  

### Step3：現状とのズレを可視化

- 今の構造と理想構造のギャップを見る  
- ボトルネックや技術的負債の集中点を把握する  

### Step4：優先順位をつけて段階的に実行

- 価値が高く、リスクが低いところから着手  
- 一気にやらない  
- 常に「動く状態」を維持する  

ここで一貫しているのは、

> **「正しさ」よりも「進め続けられること」を優先する**

という姿勢でした。


## この本が「現場向き」だと感じた理由

この本が単なる理論書で終わらないと感じた一番の理由は、  
次の3種類のリファクタリングをすべて同列に扱っている点です。

- 技術的リファクタリング  
- 戦略的リファクタリング  
- 社会技術的リファクタリング（組織・人）  

つまり、

- チーム構成を変えるのもリファクタリング  
- 責任分担を変えるのもリファクタリング  
- 意思決定フローを変えるのもリファクタリング  

という認識です。

「コードだけをきれいにしても意味がない」という現場のリアルを、  
かなり正面から扱っていると感じました。

## 技術スタックに依存しない実務的な示唆

この本から得られた、技術スタックに依存しない示唆を整理すると次のようになります。

- ✅ いきなり分散しない  
- ✅ まず業務の境界をはっきりさせる  
- ✅ 人が使っている言葉を設計の言葉にする  
- ✅ データ構造より「責務の境界」を優先する  
- ✅ 変革は機能開発に“寄生”させて少しずつ進める  

特定の言語やフレームワークに依存しない、非常に汎用性の高い内容だと感じました。


## まとめ

この本を一言でまとめるなら、次の言葉になると思っています。

> **DDDは、きれいな設計を作るための技術ではない。  
> “壊さずに進化し続けるための技術”である。**

レガシーシステムは、

- 悪だから捨てるものではなく  
- 動き続けているからこそ価値があり  
- だからこそ **止めずに、安全に、意図的に進化させる必要がある**  

Domain-Driven Transformation は、そのための  
**現実的で実践的なロードマップを示してくれる一冊** でした。
日本語訳版が出ればまた読み直したいと思います。

